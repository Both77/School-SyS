import{p as S,c as o,a as t,b as w,s as y,F as m,j as v,d as j,r,q as C,k as F,o as n,t as l}from"./index-CsmVEaGV.js";import{f as M}from"./masters-BE90M7NP.js";const N={class:"p-6 space-y-4"},T={class:"bg-white rounded shadow p-4 grid gap-3 md:grid-cols-3"},V=["value"],B=["value"],D={class:"bg-white rounded shadow overflow-hidden"},I={class:"w-full text-sm"},R={class:"p-3"},A={class:"p-3"},U={class:"p-3"},q={class:"p-3"},E={class:"p-3"},L={class:"p-3"},O={class:"p-3"},W={key:0},J={__name:"Index",setup(z){const d=r({classes:[],sections:[],subjects:[]}),c=r([]),i=r(0),u=r(0),g=F(()=>i.value?d.value.sections.filter(a=>a.class_id===i.value):d.value.sections);function k(a){return["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a]||a}async function p(){const a={};i.value&&(a.class_id=i.value),u.value&&(a.section_id=u.value);const{data:e}=await C.get("/routines",{params:a});c.value=e}return S(async()=>{d.value=await M().catch(()=>({classes:[],sections:[],subjects:[]})),await p()}),(a,e)=>(n(),o("div",N,[t("div",{class:"flex items-center justify-between"},[e[2]||(e[2]=t("h1",{class:"text-xl font-semibold"},"Class Routine",-1)),t("button",{class:"px-3 py-2 rounded bg-white border text-sm",onClick:p},"Refresh")]),t("div",T,[t("div",null,[e[4]||(e[4]=t("label",{class:"text-xs text-slate-600"},"Class",-1)),w(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),class:"w-full border rounded px-3 py-2 text-sm"},[e[3]||(e[3]=t("option",{value:0},"All",-1)),(n(!0),o(m,null,v(d.value.classes,s=>(n(),o("option",{key:s.id,value:s.id},l(s.name),9,V))),128))],512),[[y,i.value,void 0,{number:!0}]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-xs text-slate-600"},"Section",-1)),w(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:"w-full border rounded px-3 py-2 text-sm"},[e[5]||(e[5]=t("option",{value:0},"All",-1)),(n(!0),o(m,null,v(g.value,s=>(n(),o("option",{key:s.id,value:s.id},l(s.name),9,B))),128))],512),[[y,u.value,void 0,{number:!0}]])]),t("div",{class:"flex items-end"},[t("button",{class:"px-3 py-2 rounded bg-slate-900 text-white text-sm w-full",onClick:p},"Filter")])]),t("div",D,[t("table",I,[e[8]||(e[8]=t("thead",{class:"bg-slate-50"},[t("tr",null,[t("th",{class:"text-left p-3"},"Day"),t("th",{class:"text-left p-3"},"Time"),t("th",{class:"text-left p-3"},"Class"),t("th",{class:"text-left p-3"},"Section"),t("th",{class:"text-left p-3"},"Subject"),t("th",{class:"text-left p-3"},"Teacher"),t("th",{class:"text-left p-3"},"Room")])],-1)),t("tbody",null,[(n(!0),o(m,null,v(c.value,s=>{var x,f,b,_,h;return n(),o("tr",{key:s.id,class:"border-t"},[t("td",R,l(k(s.weekday)),1),t("td",A,l(s.start_time)+" - "+l(s.end_time),1),t("td",U,l((x=s.class)==null?void 0:x.name),1),t("td",q,l(((f=s.section)==null?void 0:f.name)||"-"),1),t("td",E,l((b=s.subject)==null?void 0:b.name),1),t("td",L,l(((h=(_=s.teacher)==null?void 0:_.user)==null?void 0:h.name)||"-"),1),t("td",O,l(s.room||"-"),1)])}),128)),c.value.length===0?(n(),o("tr",W,[...e[7]||(e[7]=[t("td",{class:"p-4 text-slate-500",colspan:"7"},"No routines",-1)])])):j("",!0)])])])]))}};export{J as default};
