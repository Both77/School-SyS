import{p as k,c as o,a as e,F as C,j,d as b,t as v,b as N,v as S,x as $,q as p,r as i,o as u}from"./index-CsmVEaGV.js";const D={class:"p-6 space-y-4"},E={class:"bg-white rounded shadow overflow-hidden"},A={class:"w-full text-sm"},B={class:"p-3"},M={class:"p-3"},V={class:"text-slate-600"},F={class:"p-3"},I=["onClick"],T=["onClick"],q={key:0},z={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center p-4"},L={class:"bg-white rounded shadow w-full max-w-md p-4 space-y-3"},U={class:"flex items-center justify-between"},G={class:"font-semibold"},K={__name:"Index",setup(H){const x=i([]),d=i(!1),c=i(null),n=i(""),l=i(""),r=i(!0);function w(){c.value=null,n.value="",l.value="",r.value=!0,d.value=!0}function h(s){c.value=s.id,n.value=s.name,l.value="",r.value=!0,d.value=!0}function _(){d.value=!1}async function m(){const{data:s}=await p.get("/classes");x.value=s}async function y(){var s,t;l.value="";try{c.value?await p.put(`/classes/${c.value}`,{name:n.value}):await p.post("/classes",{name:n.value}),r.value=!0,l.value="Saved!",await m(),setTimeout(()=>d.value=!1,400)}catch(a){r.value=!1,l.value=((t=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:t.message)||"Save failed"}}async function g(s){confirm(`Delete class ${s.name}?`)&&(await p.delete(`/classes/${s.id}`),await m())}return k(m),(s,t)=>(u(),o("div",D,[e("div",{class:"flex items-center justify-between"},[t[1]||(t[1]=e("h1",{class:"text-xl font-semibold"},"Classes",-1)),e("button",{class:"px-3 py-2 rounded bg-slate-900 text-white text-sm",onClick:w},"+ Add Class")]),e("div",E,[e("table",A,[t[4]||(t[4]=e("thead",{class:"bg-slate-50"},[e("tr",null,[e("th",{class:"text-left p-3"},"Name"),e("th",{class:"text-left p-3"},"Sections"),e("th",{class:"text-left p-3"},"Action")])],-1)),e("tbody",null,[(u(!0),o(C,null,j(x.value,a=>(u(),o("tr",{key:a.id,class:"border-t"},[e("td",B,v(a.name),1),e("td",M,[e("span",V,v((a.sections||[]).map(f=>f.name).join(", ")||"-"),1)]),e("td",F,[e("button",{class:"text-blue-700",onClick:f=>h(a)},"Edit",8,I),t[2]||(t[2]=e("span",{class:"mx-2 text-slate-300"},"|",-1)),e("button",{class:"text-red-700",onClick:f=>g(a)},"Delete",8,T)])]))),128)),x.value.length===0?(u(),o("tr",q,[...t[3]||(t[3]=[e("td",{class:"p-4 text-slate-500",colspan:"3"},"No classes",-1)])])):b("",!0)])])]),d.value?(u(),o("div",z,[e("div",L,[e("div",U,[e("h2",G,v(c.value?"Edit Class":"Add Class"),1),e("button",{class:"text-slate-600",onClick:_},"âœ•")]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-xs text-slate-600"},"Name",-1)),N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>n.value=a),class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[S,n.value]])]),e("div",{class:"flex justify-end gap-2 pt-2"},[e("button",{class:"px-3 py-2 rounded border bg-white text-sm",onClick:_},"Cancel"),e("button",{class:"px-3 py-2 rounded bg-slate-900 text-white text-sm",onClick:y},"Save")]),l.value?(u(),o("p",{key:0,class:$(["text-sm",r.value?"text-green-700":"text-red-700"])},v(l.value),3)):b("",!0)])])):b("",!0)]))}};export{K as default};
