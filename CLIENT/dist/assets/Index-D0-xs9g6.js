import{p as N,c as u,a as e,F as T,j as U,d as y,t as n,b as i,v as r,x as j,q as x,r as p,o as c}from"./index-Cz2jkUhJ.js";const D={class:"p-6 space-y-4"},$={class:"bg-white rounded shadow overflow-hidden"},S={class:"w-full text-sm"},A={class:"p-3"},B={class:"p-3"},M={class:"p-3"},P={class:"p-3"},F={class:"p-3"},I=["onClick"],q=["onClick"],z={key:0},L={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center p-4"},G={class:"bg-white rounded shadow w-full max-w-lg p-4 space-y-3"},H={class:"flex items-center justify-between"},J={class:"font-semibold"},K={class:"grid gap-3 md:grid-cols-2"},O={class:"md:col-span-2"},Q={class:"md:col-span-2"},R={class:"text-xs text-slate-600"},Y={__name:"Index",setup(W){const f=p([]),m=p(!1),d=p(null),a=p({name:"",email:"",password:"",employee_no:"",phone:"",designation:""}),o=p(""),v=p(!0);function _(){o.value="",v.value=!0,d.value=null,a.value={name:"",email:"",password:"",employee_no:"",phone:"",designation:""},m.value=!0}function k(l){var t,s;o.value="",v.value=!0,d.value=l.id,a.value={name:((t=l.user)==null?void 0:t.name)||"",email:((s=l.user)==null?void 0:s.email)||"",password:"",employee_no:l.employee_no||"",phone:l.phone||"",designation:l.designation||""},m.value=!0}function w(){m.value=!1}async function b(){const{data:l}=await x.get("/teachers");f.value=l.data??l}async function C(){var l,t;o.value="";try{const s={...a.value};d.value?await x.put(`/teachers/${d.value}`,s):await x.post("/teachers",s),v.value=!0,o.value="Saved!",await b(),setTimeout(()=>m.value=!1,400)}catch(s){v.value=!1,o.value=((t=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:t.message)||"Save failed"}}async function E(l){var t;confirm(`Delete teacher ${(t=l.user)==null?void 0:t.name}?`)&&(await x.delete(`/teachers/${l.id}`),await b())}return N(b),(l,t)=>(c(),u("div",D,[e("div",{class:"flex items-center justify-between"},[t[6]||(t[6]=e("h1",{class:"text-xl font-semibold"},"Teachers",-1)),e("button",{class:"px-3 py-2 rounded bg-slate-900 text-white text-sm",onClick:_},"+ Add Teacher")]),e("div",$,[e("table",S,[t[9]||(t[9]=e("thead",{class:"bg-slate-50"},[e("tr",null,[e("th",{class:"text-left p-3"},"Name"),e("th",{class:"text-left p-3"},"Email"),e("th",{class:"text-left p-3"},"Employee No"),e("th",{class:"text-left p-3"},"Phone"),e("th",{class:"text-left p-3"},"Action")])],-1)),e("tbody",null,[(c(!0),u(T,null,U(f.value,s=>{var h,g;return c(),u("tr",{key:s.id,class:"border-t"},[e("td",A,n((h=s.user)==null?void 0:h.name),1),e("td",B,n((g=s.user)==null?void 0:g.email),1),e("td",M,n(s.employee_no),1),e("td",P,n(s.phone||"-"),1),e("td",F,[e("button",{class:"text-blue-700",onClick:V=>k(s)},"Edit",8,I),t[7]||(t[7]=e("span",{class:"mx-2 text-slate-300"},"|",-1)),e("button",{class:"text-red-700",onClick:V=>E(s)},"Delete",8,q)])])}),128)),f.value.length===0?(c(),u("tr",z,[...t[8]||(t[8]=[e("td",{class:"p-4 text-slate-500",colspan:"5"},"No teachers",-1)])])):y("",!0)])])]),m.value?(c(),u("div",L,[e("div",G,[e("div",H,[e("h2",J,n(d.value?"Edit Teacher":"Add Teacher"),1),e("button",{class:"text-slate-600",onClick:w},"âœ•")]),e("div",K,[e("div",null,[t[10]||(t[10]=e("label",{class:"text-xs text-slate-600"},"Name",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.name=s),class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[r,a.value.name]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-xs text-slate-600"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.email=s),class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[r,a.value.email]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-xs text-slate-600"},"Employee No",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.employee_no=s),class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[r,a.value.employee_no]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-xs text-slate-600"},"Phone",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.phone=s),class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[r,a.value.phone]])]),e("div",O,[t[14]||(t[14]=e("label",{class:"text-xs text-slate-600"},"Designation",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.designation=s),class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[r,a.value.designation]])]),e("div",Q,[e("label",R," Password "+n(d.value?"(leave blank to keep)":""),1),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.password=s),type:"password",class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[r,a.value.password]])])]),e("div",{class:"flex justify-end gap-2 pt-2"},[e("button",{class:"px-3 py-2 rounded border bg-white text-sm",onClick:w},"Cancel"),e("button",{class:"px-3 py-2 rounded bg-slate-900 text-white text-sm",onClick:C}," Save ")]),o.value?(c(),u("p",{key:0,class:j(["text-sm",v.value?"text-green-700":"text-red-700"])},n(o.value),3)):y("",!0)])])):y("",!0)]))}};export{Y as default};
